--TABLA USUARIO

--FUNCION QUE ME DA LA FECHA ACTUAL PARA LA FECHA DE CREACION DE LA CATEGORIA
CREATE OR REPLACE FUNCTION fechaCreacion()
    RETURNS TRIGGER
AS
$$
BEGIN
    NEW.fechacreacion := CURRENT_DATE;
    RETURN NEW;
END;
$$
LANGUAGE plpgsql;

--FUNCION PARA DAR LA FECHA ACTUAL PARA PONERLA EN FECHA DE MODIFICACION (PRUEBA DE INSERCION)
CREATE OR REPLACE FUNCTION fechaPrueba()
    RETURNS TRIGGER
AS
$$
BEGIN
    NEW.fechamodificacion := CURRENT_DATE;
    RETURN NEW;
END;
$$
LANGUAGE plpgsql;

--FUNCION PARA QUE EL ESTADO DE UNA NUEVA CATEGORIA SEA ACTIVA
CREATE OR REPLACE FUNCTION estadoCategoria()
    RETURNS TRIGGER
AS
$$
BEGIN
    NEW.estado := True;
    RETURN NEW;
END;
$$
LANGUAGE plpgsql

--FUNCION PARA CREAR ID AUTOINCREMENTAL
CREATE OR REPLACE FUNCTION idIncremental()
    RETURNS TRIGGER
AS
$$
DECLARE 
    identificador INTEGER = 0;
    
BEGIN 


--CREACION DE TRIGGER DE FECHA ACTUAL PARA USUARIO
BEFORE INSERT ON public.CATEGORIA
FOR EACH ROW 
EXECUTE PROCEDURE fechaCreacion();

--CREACION DE TRIGGER DE FECHA DE MODIFICACION PARA USUARIO
BEFORE INSERT ON public.CATEGORIA
FOR EACH ROW 
EXECUTE PROCEDURE fechaPrueba();

--CREACION DE TRIGGER DE ESTADO DE LA CATEGORIA
BEFORE INSERT ON public.CATEGORIA
FOR EACH ROW
EXECUTE PROCEDURE estadoCategoria();